"use strict";function toggleMenu(){document.body.classList.toggle("header-open")}function openModal(){document.body.classList.add("video-modal-open")}function closeModal(){document.body.classList.remove("video-modal-open")}function initSlider(e){var t="#"+e;tns({container:t,controls:!1,controlsContainer:t+"-controls",items:1,loop:!1,navContainer:t+"-nav",responsive:{325:{controls:!0},768:{controls:!1,gutter:200},1024:{gutter:400},1280:{gutter:240}}})}function setupForm(){var e=function(e){return addTouched(e.target)};requiredEls.forEach(function(t){return t&&t.addEventListener("blur",e)}),formEl&&(formEl.getAttribute("action")||formEl.addEventListener("submit",handleSubmit),formEl.contactform||formEl.interest.addEventListener("change",toggleComments))}function trackEvent(e){var t=e.target.dataset;window.analytics.track(t.analyticsEvent,{category:window.analyticsData.pageName+" Page",label:t.analyticsLabel})}var arrayFrom=function(e){return[].slice.call(e)},sliders=["how-it-works","what-we-do","content-types","agency-content-types","agency-how-it-works"];document.addEventListener("DOMContentLoaded",function(){document.querySelector(".hamburger-menu").addEventListener("click",toggleMenu),document.querySelector("#requestdemo_link").addEventListener("click",function(){return document.body.classList.remove("header-open")}),arrayFrom(document.querySelectorAll("[data-analytics-event]")).forEach(function(e){e.hasAttribute("href")?window.analytics.trackLink(e,"Clicked",{category:window.analyticsData.pageName+" Page",label:e.dataset.analyticsLabel}):e.addEventListener("click",trackEvent)});var e=document.querySelector(".hero__video-cta"),t=document.querySelector(".video-modal");e&&t&&(e.addEventListener("click",openModal),t.querySelector(".close-button").addEventListener("click",closeModal),document.addEventListener("keydown",function(e){return 27===e.keyCode?closeModal():null})),"function"==typeof tns&&sliders.forEach(initSlider),setupForm()});var formEl=document.querySelector("form"),requiredEls=arrayFrom(document.querySelectorAll(":required")),addClass=function(e){return function(t){return t.classList.add(e)}},addTouched=addClass("touched"),handleSubmit=function(e){e.preventDefault(),requiredEls.forEach(addTouched),formEl.querySelector("button").setAttribute("disabled",!0),formEl.classList.add("is-sending");var t=arrayFrom(e.target.elements).reduce(function(e,t){return e[t.name]=t.value,e},{});fetch("https://www.clearvoice.com/wp-content/themes/cvresource/actions/action-contact.php",{method:"post",body:new FormData(e.target)}).then(function(e){return e.json()}).then(function(e){if(e.success){var n=document.querySelector("#form-success"),a=n.previousElementSibling;a&&(a.style.display="none"),n.classList.add("is-visible"),formEl.style.display="none",n.parentElement.scrollIntoView(),trackFormSubmit(t)}})},toggleComments=function(e){var t=document.querySelector("#commentsLabel");"freelancer"===e.target.value?t.textContent="What can we help you with?":t.textContent="What help do you need with content?"},trackFormSubmit=function(e){var t=analyticsData.pageName.match(/contact/i)?"Contact Form Submission":"Request Demo Form Submission",n=analyticsData.pageName+" Page";analytics.alias(e.email),analytics.identify({firstname:e.firstname,lastname:e.lastname,email:e.email,website:e.company_url,lifecyclestage:"lead"},{integrations:{Wootric:!1}}),analytics.track("Submit: Companies (Solutions Request)",{category:n,label:t},{context:{traits:analytics.user().traits()}})};